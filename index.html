<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALFAREZZ888 - SITUS JUDOL TERMEGAH</title>
    <style>
        /* ===== RESET & VARIABLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #ffd700;
            --primary-dark: #f39c12;
            --secondary: #2c3e50;
            --dark: #0a0f1e;
            --darker: #05070c;
            --light: #ecf0f1;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f1c40f;
            --info: #3498db;
            --scatter: #ff6b6b;
            --wild: #ffd700;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 215, 0, 0.3);
        }

        body {
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
            color: var(--light);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Background Pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.03) 0%, transparent 20%),
                radial-gradient(circle at 90% 50%, rgba(255, 215, 0, 0.03) 0%, transparent 25%),
                radial-gradient(circle at 30% 80%, rgba(255, 215, 0, 0.02) 0%, transparent 30%);
            pointer-events: none;
            z-index: -1;
        }

        /* ===== FLOATING CHAT BUTTON ===== */
        .floating-chat {
            position: fixed;
            left: 20px;
            bottom: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), #ff4500);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            cursor: grab;
            box-shadow: 0 10px 30px rgba(255,215,0,0.5);
            z-index: 9999;
            transition: all 0.3s;
            border: 3px solid white;
            user-select: none;
            touch-action: none;
        }

        .floating-chat:active {
            cursor: grabbing;
        }

        .floating-chat:hover {
            transform: scale(1.1);
        }

        .floating-chat .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            font-size: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid white;
        }

        /* ===== PAGE CONTAINER ===== */
        .page-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }

        .page-container.active {
            display: block;
        }

        /* ===== UTILITY CLASSES ===== */
        .text-gold { color: var(--primary); }
        .bg-gold { background: var(--primary); color: var(--dark); }
        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(255,215,0,0.3); }
        .btn-gold { background: var(--primary); color: var(--dark); }
        .btn-red { background: var(--danger); color: white; }
        .btn-green { background: var(--success); color: white; }
        .btn-blue { background: var(--info); color: white; }

        /* ===== LOGIN PAGE ===== */
        .login-container {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .orb {
            position: absolute;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.2), transparent 70%);
            border-radius: 50%;
            filter: blur(50px);
            animation: floatOrb 15s infinite alternate;
            z-index: 0;
        }

        .orb-1 { top: -100px; left: -100px; }
        .orb-2 { bottom: -100px; right: -100px; background: radial-gradient(circle at 30% 30%, rgba(52, 152, 219, 0.2), transparent 70%); animation-delay: -5s; }
        .orb-3 { top: 50%; left: 50%; transform: translate(-50%, -50%); width: 500px; height: 500px; background: radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.05), transparent 70%); animation: floatOrbCenter 20s infinite; }

        @keyframes floatOrb {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(100px, 100px) scale(1.2); }
        }

        @keyframes floatOrbCenter {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.5; }
        }

        .login-box {
            position: relative;
            z-index: 10;
            width: 450px;
            background: rgba(10, 15, 30, 0.7);
            backdrop-filter: blur(15px);
            border: 2px solid var(--glass-border);
            border-radius: 30px;
            padding: 50px 40px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            animation: containerAppear 0.8s ease-out;
        }

        @keyframes containerAppear {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .login-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .login-header h1 {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        .login-header h2 {
            font-size: 24px;
            color: #fff;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .input-group {
            position: relative;
        }

        .input-group i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 20px;
            z-index: 1;
        }

        .input-group input {
            width: 100%;
            padding: 18px 20px 18px 55px;
            background: rgba(255,255,255,0.05);
            border: 2px solid var(--glass-border);
            border-radius: 50px;
            color: white;
            font-size: 16px;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.1);
        }

        .login-options {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .forgot-password {
            color: var(--primary);
            text-decoration: none;
        }

        .login-btn {
            background: linear-gradient(135deg, var(--primary), #ff6b6b);
            color: var(--dark);
            border: none;
            padding: 18px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .alert-box {
            background: rgba(231,76,60,0.2);
            border: 1px solid var(--danger);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 20px;
            color: var(--danger);
            text-align: center;
            display: none;
        }

        .alert-box.show { display: block; }

        .register-link {
            text-align: center;
            margin-top: 25px;
        }

        .register-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: bold;
        }

        .copyright {
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
            color: rgba(255,255,255,0.3);
        }

        .copyright span { color: var(--primary); }

        /* ===== REGISTER PAGE ===== */
        .register-container {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .register-box {
            width: 650px;
            background: rgba(10,15,30,0.9);
            backdrop-filter: blur(15px);
            border: 3px solid var(--primary);
            border-radius: 40px;
            padding: 40px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.8);
        }

        .register-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .register-header h1 {
            font-size: 42px;
            background: linear-gradient(135deg, var(--primary), #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .register-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group {
            position: relative;
            margin-bottom: 5px;
        }

        .form-group i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 18px;
            width: 25px;
            text-align: center;
            z-index: 2;
            pointer-events: none;
        }

        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 15px 15px 15px 50px;
            background: rgba(255,255,255,0.07);
            border: 2px solid var(--glass-border);
            border-radius: 15px;
            color: white;
            font-size: 15px;
            transition: all 0.3s;
            position: relative;
            z-index: 1;
        }

        .form-group input:focus, 
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.12);
            box-shadow: 0 0 20px rgba(255,215,0,0.2);
        }

        .form-group input::placeholder {
            color: rgba(255,255,255,0.4);
            font-style: italic;
        }

        .password-strength {
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }

        .strength-bar {
            height: 100%;
            width: 0;
            transition: all 0.3s;
        }

        .strength-bar.weak { width: 33.33%; background: var(--danger); }
        .strength-bar.medium { width: 66.66%; background: var(--warning); }
        .strength-bar.strong { width: 100%; background: var(--success); }

        .terms {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            font-size: 14px;
        }

        .terms input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .terms a {
            color: var(--primary);
            text-decoration: none;
        }

        .register-btn {
            background: linear-gradient(135deg, var(--primary), #ff6b6b);
            color: var(--dark);
            border: none;
            padding: 16px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .register-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255,215,0,0.4);
        }

        .login-link {
            text-align: center;
            margin-top: 20px;
        }

        .login-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: bold;
        }

        .success-alert {
            background: rgba(46,204,113,0.2);
            border: 2px solid var(--success);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            color: var(--success);
            text-align: center;
            display: none;
        }

        /* ===== MENU PAGE ===== */
        .top-header {
            background: linear-gradient(90deg, #1a1f2f, #2a2f3f);
            border-bottom: 3px solid var(--primary);
            padding: 10px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), #ff4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .live-badge {
            background: #ff4500;
            color: white;
            padding: 5px 15px;
            border-radius: 30px;
            font-size: 14px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%,100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .user-info-header {
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
        }

        .wallet-info {
            background: #2a2f3f;
            border: 2px solid var(--primary);
            border-radius: 40px;
            padding: 8px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .wallet-icon {
            width: 30px;
            height: 30px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--dark);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #2a2f3f;
            border-radius: 40px;
            padding: 5px 20px 5px 5px;
            cursor: pointer;
            position: relative;
        }

        .avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), #ff4500);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .user-dropdown {
            position: absolute;
            top: 60px;
            right: 0;
            width: 250px;
            background: linear-gradient(145deg, #1e2333, #131827);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 15px;
            display: none;
            z-index: 1001;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .user-dropdown.show {
            display: block;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            text-decoration: none;
        }

        .dropdown-item:hover {
            background: rgba(255,215,0,0.1);
        }

        .dropdown-item i {
            width: 25px;
            color: var(--primary);
            font-size: 18px;
        }

        .dropdown-divider {
            height: 1px;
            background: var(--glass-border);
            margin: 10px 0;
        }

        .nav-bar {
            background: #1a1f2f;
            border-bottom: 1px solid var(--glass-border);
            padding: 10px 0;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 0 20px;
            flex-wrap: wrap;
        }

        .nav-item {
            color: white;
            text-decoration: none;
            padding: 10px 25px;
            border-radius: 30px;
            font-size: 16px;
            position: relative;
        }

        .nav-item.active, .nav-item:hover {
            background: var(--primary);
            color: var(--dark);
        }

        .nav-item .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            font-size: 11px;
            padding: 3px 6px;
            border-radius: 50%;
            min-width: 18px;
            text-align: center;
        }

        .main-layout {
            max-width: 1400px;
            margin: 20px auto;
            display: grid;
            grid-template-columns: 200px 1fr 200px;
            gap: 20px;
            padding: 0 20px;
        }

        .left-ads, .right-ads {
            position: sticky;
            top: 120px;
            height: fit-content;
        }

        .ad-card {
            background: linear-gradient(145deg, #1a1f2f, #0f1420);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .ad-image {
            width: 100%;
            height: 140px;
            background: linear-gradient(45deg, #2a2f3f, #3a3f4f);
            border-radius: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
            border: 2px solid var(--primary);
        }

        .ad-button {
            background: var(--primary);
            color: var(--dark);
            border: none;
            padding: 12px;
            border-radius: 30px;
            width: 100%;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        .main-content {
            background: rgba(26,31,47,0.7);
            backdrop-filter: blur(10px);
            border: 2px solid var(--primary);
            border-radius: 40px;
            padding: 25px;
            min-height: 600px;
        }

        .promo-banner {
            background: linear-gradient(90deg, var(--primary), #ff4500, #ff1493);
            border-radius: 30px;
            padding: 40px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .promo-banner h2 {
            font-size: 36px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .promo-banner p {
            font-size: 18px;
            color: rgba(255,255,255,0.9);
        }

        .user-card {
            background: linear-gradient(145deg, #1e2333, #131827);
            border: 2px solid var(--primary);
            border-radius: 30px;
            padding: 25px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .user-stats {
            display: flex;
            gap: 50px;
            flex-wrap: wrap;
        }

        .stat .label { font-size: 14px; color: rgba(255,255,255,0.6); }
        .stat .value { font-size: 28px; font-weight: bold; color: var(--primary); }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn-gold, .btn-red, .btn-green, .btn-blue {
            padding: 15px 35px;
            font-size: 16px;
            border: none;
            border-radius: 40px;
            font-weight: bold;
            cursor: pointer;
        }

        .game-filters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .filter-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-tab {
            background: #2a2f3f;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 40px;
            cursor: pointer;
            font-size: 15px;
        }

        .filter-tab.active, .filter-tab:hover {
            background: var(--primary);
            color: var(--dark);
        }

        .bet-control {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #2a2f3f;
            padding: 10px 20px;
            border-radius: 40px;
        }

        .bet-btn {
            background: var(--primary);
            color: var(--dark);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
        }

        .bet-value {
            font-size: 22px;
            font-weight: bold;
            color: var(--primary);
            min-width: 100px;
            text-align: center;
        }

        /* ===== GAME GRID ===== */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .game-card {
            background: linear-gradient(145deg, #1e2333, #131827);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(255,215,0,0.3);
        }

        .game-image {
            width: 100%;
            height: 120px;
            background: linear-gradient(145deg, #2c3e50, #1e2b3a);
            border-radius: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
            border: 2px solid var(--primary);
        }

        .game-title {
            font-size: 16px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 3px;
        }

        .game-provider {
            font-size: 11px;
            color: rgba(255,255,255,0.5);
            margin-bottom: 5px;
        }

        .game-rtp {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .game-features {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .feature-badge {
            background: rgba(255,215,0,0.1);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 9px;
        }

        .play-button {
            background: var(--primary);
            color: var(--dark);
            border: none;
            padding: 8px;
            border-radius: 20px;
            width: 100%;
            font-weight: bold;
            font-size: 13px;
            cursor: pointer;
        }

        .promo-slider {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px 0;
        }

        .promo-item {
            background: linear-gradient(145deg, #1e2333, #131827);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
        }

        .promo-icon { font-size: 35px; margin-bottom: 5px; }
        .promo-title { font-weight: bold; color: var(--primary); font-size: 14px; }

        .footer {
            background: var(--dark);
            border-top: 3px solid var(--primary);
            padding: 30px 0 15px;
            margin-top: 30px;
        }

        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 0 20px;
        }

        .footer-logo {
            font-size: 20px;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), #ff4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 8px;
        }

        .footer-links a {
            color: rgba(255,255,255,0.6);
            text-decoration: none;
            font-size: 13px;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        /* ===== GAME PAGE (FIX TOTAL) ===== */
        .game-container {
            max-width: 600px;
            margin: 30px auto;
            background: linear-gradient(145deg, #1a1f2e, #0f1420);
            border: 3px solid var(--primary);
            border-radius: 30px;
            padding: 20px;
            position: relative;
        }

        .multiplier-container {
            background: rgba(0,0,0,0.5);
            border: 2px solid var(--glass-border);
            border-radius: 40px;
            padding: 10px 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .multiplier-item {
            width: 45px;
            height: 45px;
            background: #2a2f3f;
            border: 2px solid #7f8c8d;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 22px;
            color: #7f8c8d;
            transition: all 0.3s;
        }

        .multiplier-item.active {
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: 0 0 15px rgba(255,215,0,0.5);
            transform: scale(1.1);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            background: #1a1f2f;
            border-radius: 40px;
            padding: 12px 15px;
            margin-bottom: 15px;
        }

        .slot-machine {
            background: #0f1420;
            border: 3px solid var(--primary);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .reels-container {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 3px;
        }

        .reel-column {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .reel-column.spinning {
            animation: scrollDown 0.6s cubic-bezier(0.25,0.1,0.25,1) forwards;
        }

        @keyframes scrollDown {
            0% { transform: translateY(-150%); opacity: 0.2; }
            20% { transform: translateY(-120%); opacity: 0.4; }
            40% { transform: translateY(-90%); opacity: 0.6; }
            60% { transform: translateY(-60%); opacity: 0.8; }
            80% { transform: translateY(-30%); opacity: 0.9; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .reel-cell {
            aspect-ratio: 1/0.9;
            background: linear-gradient(145deg, #2c3e50, #1e2b3a);
            border: 2px solid #4a5a6a;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: var(--primary);
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .reel-cell.scatter {
            border-color: var(--scatter);
            box-shadow: 0 0 15px var(--scatter);
            animation: scatterPulse 0.5s infinite alternate;
        }

        .reel-cell.wild {
            border-color: var(--wild);
            box-shadow: 0 0 15px var(--wild);
            color: var(--wild);
            animation: wildPulse 0.5s infinite alternate;
        }

        @keyframes scatterPulse {
            0% { transform: scale(1); box-shadow: 0 0 10px var(--scatter); }
            100% { transform: scale(1.05); box-shadow: 0 0 25px var(--scatter); }
        }

        @keyframes wildPulse {
            0% { transform: scale(1); box-shadow: 0 0 10px var(--wild); }
            100% { transform: scale(1.05); box-shadow: 0 0 25px var(--wild); }
        }

        /* ANIMASI LEDAKAN */
        .explosion {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,215,0,0.9) 0%, rgba(255,69,0,0.7) 50%, transparent 80%);
            border-radius: 50%;
            animation: explode 0.5s ease-out forwards;
            pointer-events: none;
            z-index: 10;
        }

        @keyframes explode {
            0% { transform: scale(0); opacity: 1; }
            50% { transform: scale(2); opacity: 0.8; }
            100% { transform: scale(3); opacity: 0; }
        }

        /* SCATTER OVERLAY BESAR */
        .scatter-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .scatter-box {
            background: linear-gradient(135deg, var(--primary), #ff4500);
            padding: 50px 80px;
            border-radius: 100px;
            text-align: center;
            border: 10px solid white;
            box-shadow: 0 0 100px rgba(255,215,0,0.8);
            animation: boxPulse 1s infinite;
        }

        @keyframes boxPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .scatter-box h1 {
            font-size: 60px;
            color: var(--dark);
            margin-bottom: 20px;
            text-shadow: 3px 3px 0 white;
        }

        .scatter-box h2 {
            font-size: 48px;
            color: white;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0 var(--dark);
        }

        .scatter-box .multiplier {
            font-size: 80px;
            color: var(--dark);
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 0 white;
        }

        .scatter-box button {
            background: var(--dark);
            color: var(--primary);
            border: 5px solid white;
            padding: 20px 60px;
            font-size: 36px;
            border-radius: 80px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .scatter-box button:hover {
            transform: scale(1.1);
            background: white;
            color: var(--dark);
        }

        .win-amount {
            background: var(--success);
            padding: 15px;
            border-radius: 40px;
            color: white;
            text-align: center;
            margin: 15px 0;
            font-size: 24px;
            font-weight: bold;
            animation: winPulse 1s infinite;
        }

        @keyframes winPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .free-spin-info {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 30px;
            padding: 15px;
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid white;
        }

        .back-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 40px;
            width: 100%;
            cursor: pointer;
            font-size: 16px;
        }

        /* ===== INFO AKUN PAGE ===== */
        .profile-card {
            background: linear-gradient(145deg, #1e2333, #131827);
            border: 2px solid var(--primary);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--primary), #ff4500);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
            border: 3px solid white;
        }

        .profile-info h2 {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .profile-info p {
            color: rgba(255,255,255,0.7);
            font-size: 16px;
        }

        .profile-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .detail-item {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 15px;
        }

        .detail-item .label {
            color: var(--primary);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .detail-item .value {
            font-size: 18px;
            font-weight: bold;
        }

        /* ===== RIWAYAT TRANSAKSI PAGE ===== */
        .history-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .history-filter {
            background: #2a2f3f;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 30px;
            cursor: pointer;
        }

        .history-filter.active {
            background: var(--primary);
            color: var(--dark);
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
        }

        .history-table th {
            text-align: left;
            padding: 15px;
            color: var(--primary);
            border-bottom: 2px solid var(--glass-border);
        }

        .history-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--glass-border);
        }

        .history-table .status-success {
            color: var(--success);
            font-weight: bold;
        }

        .history-table .status-pending {
            color: var(--warning);
            font-weight: bold;
        }

        .history-table .status-failed {
            color: var(--danger);
            font-weight: bold;
        }

        /* ===== CHAT PAGE ===== */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chat-message {
            display: flex;
            gap: 10px;
            max-width: 80%;
        }

        .chat-message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), #ff4500);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .chat-bubble {
            background: #2a2f3f;
            padding: 12px 18px;
            border-radius: 20px;
            position: relative;
        }

        .chat-message.user .chat-bubble {
            background: var(--primary);
            color: var(--dark);
        }

        .chat-message.developer .chat-bubble {
            background: var(--info);
            color: white;
        }

        .chat-name {
            font-size: 12px;
            margin-bottom: 5px;
            color: rgba(255,255,255,0.7);
        }

        .chat-message.user .chat-name {
            text-align: right;
        }

        .chat-text {
            font-size: 14px;
            word-break: break-word;
        }

        .chat-time {
            font-size: 10px;
            color: rgba(255,255,255,0.4);
            margin-top: 5px;
            text-align: right;
        }

        .chat-input-area {
            display: flex;
            gap: 10px;
            padding: 20px;
            background: #1a1f2f;
            border-top: 2px solid var(--glass-border);
        }

        .chat-input {
            flex: 1;
            padding: 15px;
            background: #2a2f3f;
            border: 2px solid var(--primary);
            border-radius: 30px;
            color: white;
            font-size: 14px;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary-dark);
        }

        .chat-send {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border: none;
            border-radius: 50%;
            color: var(--dark);
            font-size: 20px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .chat-send:hover {
            transform: scale(1.1);
        }

        .no-chat {
            text-align: center;
            color: rgba(255,255,255,0.5);
            padding: 50px;
            font-size: 18px;
        }

        /* ===== ADMIN PAGE ===== */
        .admin-container {
            display: flex;
            gap: 20px;
            min-height: 80vh;
        }

        .admin-sidebar {
            width: 80px;
            background: linear-gradient(145deg, #1a1f2f, #0f1420);
            border: 2px solid var(--primary);
            border-radius: 40px;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }

        .admin-sidebar-item {
            position: relative;
            width: 50px;
            height: 50px;
            background: #2a2f3f;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--primary);
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .admin-sidebar-item:hover {
            background: var(--primary);
            color: var(--dark);
            transform: scale(1.1);
        }

        .admin-sidebar-item.active {
            background: var(--primary);
            color: var(--dark);
        }

        .admin-sidebar-item .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            font-size: 11px;
            padding: 3px 6px;
            border-radius: 50%;
            min-width: 18px;
            text-align: center;
        }

        .admin-content {
            flex: 1;
            background: rgba(26,31,47,0.7);
            backdrop-filter: blur(10px);
            border: 2px solid var(--primary);
            border-radius: 40px;
            padding: 30px;
            min-height: 600px;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--glass-border);
        }

        .admin-header h2 {
            color: var(--primary);
            font-size: 28px;
        }

        .admin-header .badge-large {
            background: #ff4500;
            color: white;
            padding: 8px 25px;
            border-radius: 40px;
            font-size: 16px;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }

        .admin-table th {
            text-align: left;
            padding: 15px;
            color: var(--primary);
            border-bottom: 2px solid var(--glass-border);
            font-size: 14px;
        }

        .admin-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--glass-border);
        }

        .admin-table tr:hover {
            background: rgba(255,215,0,0.05);
        }

        .admin-action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin: 0 3px;
            font-size: 12px;
        }

        .btn-accept {
            background: var(--success);
            color: white;
        }

        .btn-reject {
            background: var(--danger);
            color: white;
        }

        .btn-view {
            background: var(--info);
            color: white;
        }

        .chat-user-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .chat-user-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chat-user-item:hover {
            background: rgba(255,215,0,0.1);
        }

        .chat-user-item.unread {
            border-left: 4px solid var(--danger);
        }

        .chat-user-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), #ff4500);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
        }

        .chat-user-info {
            flex: 1;
        }

        .chat-user-name {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 3px;
        }

        .chat-user-preview {
            font-size: 12px;
            color: rgba(255,255,255,0.6);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }

        .chat-user-time {
            font-size: 11px;
            color: rgba(255,255,255,0.4);
        }

        .chat-user-badge {
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
        }

        .admin-chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            background: rgba(0,0,0,0.2);
            border-radius: 20px;
            overflow: hidden;
        }

        .admin-chat-header {
            background: #1a1f2f;
            padding: 15px 20px;
            border-bottom: 2px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .admin-chat-input {
            display: flex;
            gap: 10px;
            padding: 20px;
            background: #1a1f2f;
            border-top: 2px solid var(--primary);
        }

        /* ===== MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(145deg, #1e2333, #131827);
            margin: 5% auto;
            padding: 30px;
            width: 500px;
            max-width: 90%;
            border-radius: 40px;
            border: 3px solid var(--primary);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-header h2 { color: var(--primary); font-size: 28px; }

        .modal-footer {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }
        .btn-primary { background: var(--primary); color: var(--dark); }
        .btn-success { background: var(--success); color: white; }
        .btn-secondary { background: #7f8c8d; color: white; }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-layout { grid-template-columns: 1fr; }
            .left-ads, .right-ads { display: none; }
        }

        @media (max-width: 768px) {
            .game-grid { grid-template-columns: repeat(2, 1fr); }
            .profile-details { grid-template-columns: 1fr; }
            .admin-container { flex-direction: column; }
            .admin-sidebar { width: 100%; flex-direction: row; justify-content: center; padding: 15px; }
        }
    </style>
</head>
<body>
    <!-- FLOATING CHAT BUTTON -->
    <div class="floating-chat" id="floatingChat" onclick="showPage('chatPage')">
        üí¨
        <span class="badge" id="floatingChatBadge" style="display: none;">1</span>
    </div>

    <!-- LOGIN PAGE -->
    <div id="loginPage" class="page-container active">
        <div class="login-container">
            <div class="orb orb-1"></div>
            <div class="orb orb-2"></div>
            <div class="orb orb-3"></div>
            <div class="login-box">
                <div class="login-header">
                    <h1>ALFAREZZ888</h1>
                    <h2>‚ö° MAHJONG WAYS 2 ‚ö°</h2>
                    <p>WELCOME BACK, <span style="color: var(--primary);">BOS!</span></p>
                </div>
                <div class="alert-box" id="loginAlert">‚ùå Username atau Password salah, kontol!</div>
                <form class="login-form" onsubmit="return handleLogin(event)">
                    <div class="input-group">
                        <i>üë§</i>
                        <input type="text" id="loginUsername" placeholder="Username" required>
                    </div>
                    <div class="input-group">
                        <i>üîí</i>
                        <input type="password" id="loginPassword" placeholder="Password" required>
                    </div>
                    <div class="login-options">
                        <label class="remember-me">
                            <input type="checkbox" id="rememberMe" checked> Ingat gue
                        </label>
                        <a href="#" class="forgot-password" onclick="alert('Hubungi admin @ALFAREZZ888')">Lupa password?</a>
                    </div>
                    <button type="submit" class="login-btn">üöÄ MASUK BANGSAT üöÄ</button>
                </form>
                <div class="register-link">
                    Belum punya akun? <a href="#" onclick="showPage('registerPage')">DAFTAR SEKARANG</a>
                </div>
                <div class="copyright">
                    <span>¬© ALFAREZZ888</span> ‚Ä¢ Quantum V12.0
                </div>
            </div>
        </div>
    </div>

    <!-- REGISTER PAGE -->
    <div id="registerPage" class="page-container">
        <div class="register-container">
            <div class="register-box">
                <div class="register-header">
                    <h1>üöÄ DAFTAR MEMBER</h1>
                    <p>Gabung jadi bagian dari ALFAREZZ888</p>
                </div>
                
                <div class="success-alert" id="registerSuccess">
                    ‚úÖ Pendaftaran berhasil! Mengalihkan ke login...
                </div>
                
                <form class="register-form" onsubmit="return handleRegister(event)">
                    <div class="input-row">
                        <div class="form-group">
                            <i>üë§</i>
                            <input type="text" id="regUsername" placeholder="Username" required minlength="4" maxlength="20">
                        </div>
                        <div class="form-group">
                            <i>üìß</i>
                            <input type="email" id="regEmail" placeholder="Email" required>
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="form-group">
                            <i>üì±</i>
                            <input type="text" id="regPhone" placeholder="No. HP" required>
                        </div>
                        <div class="form-group">
                            <i>üîó</i>
                            <input type="text" id="regReferral" placeholder="Kode Referral (opsional)">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <i>üîí</i>
                        <input type="password" id="regPassword" placeholder="Password" required minlength="6" onkeyup="checkPasswordStrength()">
                    </div>
                    <div class="password-strength">
                        <div class="strength-bar" id="strengthBar"></div>
                    </div>
                    
                    <div class="form-group">
                        <i>‚úì</i>
                        <input type="password" id="regConfirmPassword" placeholder="Konfirmasi Password" required>
                    </div>
                    
                    <div class="input-row">
                        <div class="form-group">
                            <i>üè¶</i>
                            <select id="regBank" required>
                                <option value="" disabled selected>Pilih Bank/EWallet</option>
                                <option value="bca">BCA</option>
                                <option value="mandiri">Mandiri</option>
                                <option value="bri">BRI</option>
                                <option value="dana">DANA</option>
                                <option value="ovo">OVO</option>
                                <option value="gopay">GoPay</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <i>üí≥</i>
                            <input type="text" id="regAccountNumber" placeholder="No. Rekening" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <i>üìõ</i>
                        <input type="text" id="regAccountName" placeholder="Nama Pemilik Rekening" required>
                    </div>
                    
                    <label class="terms">
                        <input type="checkbox" id="regTerms" required> Saya setuju dengan 
                        <a href="#" onclick="alert('Syarat & Ketentuan ALFAREZZ888')">Syarat & Ketentuan</a>
                    </label>
                    
                    <button type="submit" class="register-btn">üî• DAFTAR SEKARANG üî•</button>
                </form>
                
                <div class="login-link">
                    Sudah punya akun? <a href="#" onclick="showPage('loginPage')">Login di sini</a>
                </div>
            </div>
        </div>
    </div>

    <!-- MENU PAGE -->
    <div id="menuPage" class="page-container">
        <header class="top-header">
            <div class="header-container">
                <div class="logo-area" style="display: flex; align-items: center; gap: 20px;">
                    <div class="logo">‚ö° ALFAREZZ888 ‚ö°</div>
                    <div class="live-badge">üî¥ LIVE <span id="liveCount">1.234</span> PLAYERS</div>
                </div>
                <div class="user-info-header">
                    <div class="wallet-info" onclick="showPage('infoAkunPage')">
                        <div class="wallet-icon">üí∞</div>
                        <div class="wallet-amount" id="menuWallet">Rp 0</div>
                    </div>
                    <div class="user-profile" id="userProfileBtn">
                        <div class="avatar" id="menuAvatar">üëë</div>
                        <span id="menuUsername">Loading...</span>
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-item" onclick="showPage('infoAkunPage')"><i>üë§</i> <span>Informasi Akun</span></div>
                        <div class="dropdown-item" onclick="showPage('riwayatPage')"><i>üìú</i> <span>Riwayat Transaksi</span></div>
                        <div class="dropdown-item" onclick="showPage('chatPage')"><i>üí¨</i> <span>Live Chat</span><span class="badge" id="chatNotif" style="margin-left: auto; display: none;">1</span></div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="logout()"><i>üö™</i> <span style="color: var(--danger);">Logout</span></div>
                    </div>
                </div>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-container">
                <a href="#" class="nav-item active" onclick="showMenuHome(event)">üè† HOME</a>
                <a href="#" class="nav-item">üé∞ SLOTS</a>
                <a href="#" class="nav-item">‚ö° LIVE</a>
                <a href="#" class="nav-item">üé≤ SPORTS</a>
                <a href="#" class="nav-item">üéÆ FISHING</a>
                <a href="#" class="nav-item">üèÜ PROMOSI</a>
                <a href="#" class="nav-item" id="adminNavLink" style="display: none;" onclick="showPage('adminPage')">üëë ADMIN</a>
            </div>
        </nav>

        <div class="main-layout">
            <div class="left-ads">
                <div class="ad-card">
                    <div class="ad-image">üé∞</div>
                    <h3>BONUS 100%</h3>
                    <button class="ad-button" onclick="alert('Hubungi admin')">CLAIM</button>
                </div>
            </div>

            <div class="main-content" id="menuMainContent">
                <div class="promo-banner">
                    <h2>üéâ BONUS NEW MEMBER 200% üéâ</h2>
                    <p>Deposit 50k dapat 150k ‚Ä¢ WD Berapapun Dibayar</p>
                </div>

                <div class="user-card">
                    <div class="user-stats">
                        <div class="stat"><div class="label">SALDO</div><div class="value" id="menuSaldo">Rp 0</div></div>
                        <div class="stat"><div class="label">BONUS</div><div class="value">Rp 50.000</div></div>
                        <div class="stat"><div class="label">POIN</div><div class="value">1.234</div></div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn-gold" onclick="showModal('depo')">üí∞ DEPOSIT</button>
                        <button class="btn-red" onclick="showModal('wd')">üí∏ WITHDRAW</button>
                    </div>
                </div>

                <div class="game-filters">
                    <div class="filter-tabs">
                        <button class="filter-tab active">SEMUA</button>
                        <button class="filter-tab">SLOT</button>
                    </div>
                    <div class="bet-control">
                        <span>BET:</span>
                        <button class="bet-btn" onclick="changeBetGlobal(-1000)">-</button>
                        <span class="bet-value" id="globalBet">Rp 10.000</span>
                        <button class="bet-btn" onclick="changeBetGlobal(1000)">+</button>
                    </div>
                </div>

                <div class="game-grid" id="gameGrid"></div>
            </div>

            <div class="right-ads">
                <div class="ad-card">
                    <div class="ad-image">üèÜ</div>
                    <h3>JACKPOT 1JT</h3>
                    <button class="ad-button">LIHAT</button>
                </div>
            </div>
        </div>
    </div>

    <!-- INFO AKUN PAGE -->
    <div id="infoAkunPage" class="page-container">
        <div class="main-content" style="max-width: 800px; margin: 20px auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h1 style="color: var(--primary);">üìã INFORMASI AKUN</h1>
                <button class="btn-gold" onclick="showPage('menuPage')">‚óÄ KEMBALI</button>
            </div>
            <div class="profile-card" id="profileCard"></div>
            <div class="profile-details" id="profileDetails"></div>
        </div>
    </div>

    <!-- RIWAYAT PAGE -->
    <div id="riwayatPage" class="page-container">
        <div class="main-content" style="max-width: 900px; margin: 20px auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h1 style="color: var(--primary);">üìú RIWAYAT TRANSAKSI</h1>
                <button class="btn-gold" onclick="showPage('menuPage')">‚óÄ KEMBALI</button>
            </div>
            <div class="history-filters">
                <button class="history-filter active" onclick="filterHistory('all')">SEMUA</button>
                <button class="history-filter" onclick="filterHistory('deposit')">DEPOSIT</button>
                <button class="history-filter" onclick="filterHistory('wd')">WITHDRAW</button>
            </div>
            <div style="background: rgba(26,31,47,0.7); border-radius: 30px; padding: 20px;">
                <table class="history-table">
                    <thead><tr><th>Tanggal</th><th>Tipe</th><th>Jumlah</th><th>Status</th><th>Keterangan</th></tr></thead>
                    <tbody id="historyBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- CHAT PAGE -->
    <div id="chatPage" class="page-container">
        <div class="main-content" style="max-width: 700px; margin: 20px auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h1 style="color: var(--primary);">üí¨ LIVE CHAT</h1>
                <button class="btn-gold" onclick="showPage('menuPage')">‚óÄ KEMBALI</button>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="userChatMessages"></div>
                <div class="chat-input-area">
                    <input type="text" class="chat-input" id="userChatInput" placeholder="Ketik pesan..." onkeypress="if(event.key === 'Enter') sendUserMessage()">
                    <button class="chat-send" onclick="sendUserMessage()">‚û§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- GAME PAGE (FIX TOTAL) -->
    <div id="gamePage" class="page-container">
        <div class="game-container">
            <div class="game-header" style="text-align: center; margin-bottom: 15px;">
                <h1 style="font-size: 24px; background: linear-gradient(135deg, var(--primary), #ff6b6b); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="gameTitle">‚ö°MAHJONG WAYS 2‚ö°</h1>
            </div>

            <div class="multiplier-container" id="multiplierContainer">
                <div class="multiplier-item" id="mult1">1</div>
                <div class="multiplier-item" id="mult2">2</div>
                <div class="multiplier-item" id="mult3">3</div>
                <div class="multiplier-item" id="mult4">4</div>
                <div class="multiplier-item" id="mult5">5</div>
            </div>

            <div class="game-info">
                <div><span style="color: var(--primary);">üí∞ SALDO</span><br><span id="gameSaldo" style="font-weight: bold;">Rp 0</span></div>
                <div><span style="color: var(--primary);">üé∞ BET</span><br><span id="gameBet" style="font-weight: bold;">Rp 10.000</span></div>
                <div><span style="color: var(--primary);">‚ö° FREE</span><br><span id="gameFreeSpin" style="font-weight: bold;">0</span></div>
            </div>

            <div class="free-spin-info" id="freeSpinInfo" style="display: none;">
                <span>üé∞ FREE SPIN AKTIF</span>
                <span>SISA: <span id="freeSpinRemaining">0</span></span>
            </div>

            <div class="slot-machine">
                <div class="reels-container" id="reelsContainer"></div>
                <div id="winMessage"></div>
                <button class="btn-gold" id="spinBtn" onclick="gameSpin()" style="width: 100%; padding: 15px; font-size: 20px; margin-top: 15px;">‚ö° SPIN ‚ö°</button>
            </div>

            <div class="bet-control" style="justify-content: center; margin: 15px 0;">
                <button class="bet-btn" onclick="changeGameBet(-1000)">-</button>
                <span class="bet-value" id="gameBetValue">Rp 10.000</span>
                <button class="bet-btn" onclick="changeGameBet(1000)">+</button>
            </div>

            <button class="back-btn" onclick="showPage('menuPage')">‚óÄ KEMBALI</button>
        </div>
    </div>

    <!-- ADMIN PAGE -->
    <div id="adminPage" class="page-container">
        <div class="admin-container">
            <div class="admin-sidebar">
                <div class="admin-sidebar-item active" onclick="switchAdminTab('dashboard')" title="Dashboard">üìä</div>
                <div class="admin-sidebar-item" onclick="switchAdminTab('deposit')" title="Deposit" id="adminDepositIcon">
                    üí∞<span class="badge" id="adminDepositBadge" style="display: none;">0</span>
                </div>
                <div class="admin-sidebar-item" onclick="switchAdminTab('withdraw')" title="Withdraw" id="adminWDIcon">
                    üí∏<span class="badge" id="adminWDBadge" style="display: none;">0</span>
                </div>
                <div class="admin-sidebar-item" onclick="switchAdminTab('users')" title="Users">üë•</div>
                <div class="admin-sidebar-item" onclick="switchAdminTab('chat')" title="Chat" id="adminChatIcon">
                    üí¨<span class="badge" id="adminChatBadge" style="display: none;">0</span>
                </div>
                <div class="admin-sidebar-item" onclick="switchAdminTab('settings')" title="Settings">‚öôÔ∏è</div>
            </div>
            <div class="admin-content" id="adminContent"></div>
        </div>
    </div>

    <!-- MODAL DEPOSIT -->
    <div id="modalDepo" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h2>üí∞ DEPOSIT</h2></div>
            <div class="modal-body">
                <div style="background: rgba(255,215,0,0.1); border-radius: 20px; padding: 20px; margin-bottom: 20px; text-align: center;">
                    <p style="font-size: 18px; margin-bottom: 15px;">üè¶ REKENING TUJUAN:</p>
                    <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                        <div style="background: #2a2f3f; padding: 15px 25px; border-radius: 15px; text-align: center;">
                            <div style="font-size: 30px; margin-bottom: 5px;">üèß</div>
                            <div style="color: var(--primary); font-size: 20px; font-weight: bold;">DANA</div>
                            <div style="font-size: 18px; margin: 10px 0;">087760337535</div>
                            <button onclick="copyText('087760337535')" style="background: var(--primary); border: none; padding: 8px 20px; border-radius: 10px; font-weight: bold; cursor: pointer;">COPY</button>
                        </div>
                        <div style="background: #2a2f3f; padding: 15px 25px; border-radius: 15px; text-align: center;">
                            <div style="font-size: 30px; margin-bottom: 5px;">üí≥</div>
                            <div style="color: var(--primary); font-size: 20px; font-weight: bold;">GOPAY</div>
                            <div style="font-size: 18px; margin: 10px 0;">087760337535</div>
                            <button onclick="copyText('087760337535')" style="background: var(--primary); border: none; padding: 8px 20px; border-radius: 10px; font-weight: bold; cursor: pointer;">COPY</button>
                        </div>
                    </div>
                    <p style="margin-top: 15px; color: rgba(255,255,255,0.6);">* Minimal deposit Rp 50.000</p>
                </div>
                <input type="number" id="depoJumlah" placeholder="Jumlah Deposit" style="width:100%; padding:15px; margin-bottom:15px; background:#2a2f3f; border:2px solid var(--primary); border-radius:15px; color:white;">
                <select id="depoBank" style="width:100%; padding:15px; margin-bottom:15px; background:#2a2f3f; border:2px solid var(--primary); border-radius:15px; color:white;">
                    <option value="dana">DANA</option>
                    <option value="gopay">GOPAY</option>
                </select>
                <input type="file" id="buktiTF" accept="image/*" style="margin-bottom:15px; padding:10px; background:#2a2f3f; border-radius:15px; width:100%; color:white;">
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-primary" onclick="processDeposit()">KIRIM</button>
                <button class="modal-btn btn-secondary" onclick="closeModal()">TUTUP</button>
            </div>
        </div>
    </div>

    <!-- MODAL WITHDRAW -->
    <div id="modalWd" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h2>üí∏ WITHDRAW</h2></div>
            <div class="modal-body">
                <input type="number" id="wdJumlah" placeholder="Jumlah WD (min 50.000)" style="width:100%; padding:15px; margin-bottom:15px; background:#2a2f3f; border:2px solid var(--primary); border-radius:15px; color:white;">
                <select id="wdBank" style="width:100%; padding:15px; margin-bottom:15px; background:#2a2f3f; border:2px solid var(--primary); border-radius:15px; color:white;">
                    <option value="bca">BCA</option>
                    <option value="mandiri">Mandiri</option>
                    <option value="bri">BRI</option>
                    <option value="dana">DANA</option>
                    <option value="gopay">GOPAY</option>
                </select>
                <input type="text" id="wdRekening" placeholder="No Rekening/EWallet" style="width:100%; padding:15px; background:#2a2f3f; border:2px solid var(--primary); border-radius:15px; color:white;">
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-success" onclick="processWD()">WD</button>
                <button class="modal-btn btn-secondary" onclick="closeModal()">TUTUP</button>
            </div>
        </div>
    </div>

    <!-- MODAL USER SETTINGS (ADMIN) -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è SETTING USER</h2>
                <div style="background: rgba(255,215,0,0.2); padding: 10px; border-radius: 15px; margin-top: 10px; color: var(--primary);" id="modalUsername">@user</div>
            </div>
            <div class="modal-body">
                <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button onclick="switchTab('saldo')" id="tabSaldoBtn" style="background: var(--primary); padding: 10px 20px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">üí∞ SALDO</button>
                    <button onclick="switchTab('scatter')" id="tabScatterBtn" style="background: #2a2f3f; color: white; padding: 10px 20px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">‚ö° SCATTER</button>
                    <button onclick="switchTab('kemenangan')" id="tabKemenanganBtn" style="background: #2a2f3f; color: white; padding: 10px 20px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">üèÜ KEMENANGAN</button>
                </div>
                
                <div id="tabSaldoContent">
                    <p style="margin-bottom: 10px;">Saldo: <span id="modalCurrentSaldo" style="color: var(--primary); font-weight: bold;">Rp 0</span></p>
                    <input type="number" id="modalSaldoAmount" placeholder="Jumlah" style="width:100%; padding:12px; margin:10px 0; background:#2a2f3f; border:2px solid var(--primary); border-radius:10px; color:white;">
                    <div style="display: flex; gap: 10px;">
                        <button class="btn-green" onclick="addSaldo()" style="flex:1; padding:12px;">TAMBAH</button>
                        <button class="btn-blue" onclick="setSaldo()" style="flex:1; padding:12px;">SET</button>
                    </div>
                </div>
                
                <div id="tabScatterContent" style="display:none;">
                    <p style="color: var(--primary); margin-bottom: 10px;">‚ö° SCATTER = „äôÔ∏è</p>
                    <select id="scatterJumlah" style="width:100%; padding:12px; margin-bottom:10px; background:#2a2f3f; border:2px solid var(--primary); border-radius:10px; color:white;">
                        <option value="0">TIDAK ADA SCATTER</option>
                        <option value="3">3 SCATTER (10 FREE SPIN)</option>
                        <option value="4">4 SCATTER (12 FREE SPIN)</option>
                        <option value="5">5 SCATTER (14 FREE SPIN)</option>
                    </select>
                    <input type="number" id="scatterNominal" placeholder="Nominal Kemenangan (Rp)" value="500000" style="width:100%; padding:12px; margin-bottom:10px; background:#2a2f3f; border:2px solid var(--primary); border-radius:10px; color:white;">
                    <select id="scatterGame" style="width:100%; padding:12px; margin-bottom:10px; background:#2a2f3f; border:2px solid var(--primary); border-radius:10px; color:white;">
                        <option value="mahjong">MAHJONG WAYS 2</option>
                        <option value="gates">GATES OF OLYMPUS</option>
                        <option value="sweet">SWEET BONANZA</option>
                        <option value="princess">STARLIGHT PRINCESS</option>
                        <option value="aztec">AZTEC GEMS</option>
                        <option value="wild">WILD WEST GOLD</option>
                    </select>
                    <button class="btn-primary" onclick="applyScatter()" style="width:100%; padding:12px;">TERAPKAN SCATTER</button>
                </div>

                <div id="tabKemenanganContent" style="display:none;">
                    <p style="margin-bottom: 10px; color: var(--primary);">üèÜ ATUR KEMENANGAN</p>
                    <select id="kemenanganGame" style="width:100%; padding:12px; margin-bottom:10px; background:#2a2f3f; border:2px solid var(--primary); border-radius:10px; color:white;">
                        <option value="mahjong">MAHJONG WAYS 2</option>
                        <option value="gates">GATES OF OLYMPUS</option>
                        <option value="sweet">SWEET BONANZA</option>
                        <option value="princess">STARLIGHT PRINCESS</option>
                        <option value="aztec">AZTEC GEMS</option>
                        <option value="wild">WILD WEST GOLD</option>
                    </select>
                    <input type="number" id="kemenanganNominal" placeholder="Nominal Kemenangan" value="100000" style="width:100%; padding:12px; margin-bottom:10px; background:#2a2f3f; border:2px solid var(--primary); border-radius:10px; color:white;">
                    <select id="kemenanganTipe" style="width:100%; padding:12px; margin-bottom:10px; background:#2a2f3f; border:2px solid var(--primary); border-radius:10px; color:white;">
                        <option value="win">PASTI MENANG</option>
                        <option value="lose">PASTI KALAH</option>
                        <option value="random">RANDOM</option>
                    </select>
                    <button class="btn-primary" onclick="applyKemenangan()" style="width:100%; padding:12px;">TERAPKAN</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-secondary" onclick="closeUserModal()">TUTUP</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== GLOBAL VARIABLES ====================
        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('alfarezz_users')) || [];
        let deposits = JSON.parse(localStorage.getItem('alfarezz_deposits')) || [];
        let wds = JSON.parse(localStorage.getItem('alfarezz_wd')) || [];
        let chats = JSON.parse(localStorage.getItem('alfarezz_chats')) || {};
        let scatterSettings = JSON.parse(localStorage.getItem('alfarezz_scatter')) || {};
        let kemenanganSettings = JSON.parse(localStorage.getItem('alfarezz_kemenangan')) || {};
        let currentBet = 10000;
        let deviceId = Math.random().toString(36).substring(7);
        let currentAdminTab = 'dashboard';
        let currentChatUser = null;
        let freeSpinRemaining = 0;
        let isFreeSpinActive = false;
        let isCascading = false;

        // ==================== SIMBOL ====================
        const SCATTER = '„äôÔ∏è';
        const WILD = '‚ò£Ô∏è';
        const SYMBOLS = ['üçí', 'üçã', 'üçä', 'üçá', 'üíé', '7Ô∏è‚É£', 'üîî', 'üçâ', 'üçì', 'ü•ù', 'üçç'];

        // ==================== FLOATING CHAT DRAG ====================
        const floatingChat = document.getElementById('floatingChat');
        let isDragging = false;
        let offsetX, offsetY;

        floatingChat.addEventListener('mousedown', (e) => {
            isDragging = true;
            offsetX = e.clientX - floatingChat.getBoundingClientRect().left;
            offsetY = e.clientY - floatingChat.getBoundingClientRect().top;
            floatingChat.style.cursor = 'grabbing';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            let x = e.clientX - offsetX;
            let y = e.clientY - offsetY;
            x = Math.max(0, Math.min(x, window.innerWidth - floatingChat.offsetWidth));
            y = Math.max(0, Math.min(y, window.innerHeight - floatingChat.offsetHeight));
            floatingChat.style.left = x + 'px';
            floatingChat.style.top = y + 'px';
            floatingChat.style.bottom = 'auto';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            floatingChat.style.cursor = 'grab';
        });

        // ==================== PAGE NAVIGATION ====================
        function showPage(pageId) {
            document.querySelectorAll('.page-container').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            if(pageId === 'menuPage') { loadMenuData(); renderGameGrid(); }
            if(pageId === 'adminPage') loadAdminData();
            if(pageId === 'gamePage') initGamePage();
            if(pageId === 'infoAkunPage') loadInfoAkun();
            if(pageId === 'riwayatPage') loadRiwayat();
            if(pageId === 'chatPage') loadUserChat();
            
            document.getElementById('userDropdown')?.classList.remove('show');
        }

        function showMenuHome(e) {
            e.preventDefault();
            document.getElementById('menuMainContent').innerHTML = `
                <div class="promo-banner">...</div>
                <div class="user-card">...</div>
                <div class="game-filters">...</div>
                <div class="game-grid" id="gameGrid"></div>
            `;
            renderGameGrid();
        }

        // ==================== LOGIN HANDLER ====================
        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            if(username === 'ezel' && password === 'ezel301123') {
                currentUser = { username: 'ezel', role: 'admin', saldo: 999999999, deviceId, name: 'Developer' };
                localStorage.setItem('alfarezz_current_user_' + deviceId, JSON.stringify(currentUser));
                document.getElementById('adminNavLink').style.display = 'inline-block';
                showPage('adminPage');
                return false;
            }
            
            const user = users.find(u => u.username === username && u.password === password);
            if(user) {
                currentUser = { ...user, deviceId };
                user.lastSeen = new Date().toISOString();
                user.deviceId = deviceId;
                localStorage.setItem('alfarezz_current_user_' + deviceId, JSON.stringify(currentUser));
                localStorage.setItem('alfarezz_users', JSON.stringify(users));
                showPage('menuPage');
            } else {
                document.getElementById('loginAlert').classList.add('show');
                setTimeout(() => document.getElementById('loginAlert').classList.remove('show'), 3000);
            }
            return false;
        }

        // ==================== REGISTER HANDLER ====================
        function handleRegister(e) {
            e.preventDefault();
            const username = document.getElementById('regUsername').value;
            const password = document.getElementById('regPassword').value;
            const confirm = document.getElementById('regConfirmPassword').value;
            
            if(password !== confirm) { alert('Password beda!'); return false; }
            if(users.find(u => u.username === username)) { alert('Username udah ada!'); return false; }
            
            const newUser = {
                username, password,
                email: document.getElementById('regEmail').value,
                phone: document.getElementById('regPhone').value,
                bank: document.getElementById('regBank').value,
                accountNumber: document.getElementById('regAccountNumber').value,
                accountName: document.getElementById('regAccountName').value,
                saldo: 0,
                registerDate: new Date().toISOString(),
                lastSeen: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem('alfarezz_users', JSON.stringify(users));
            
            document.getElementById('registerSuccess').style.display = 'block';
            setTimeout(() => showPage('loginPage'), 2000);
            return false;
        }

        function checkPasswordStrength() {
            const pwd = document.getElementById('regPassword').value;
            const bar = document.getElementById('strengthBar');
            bar.className = 'strength-bar';
            if(pwd.length < 6) bar.classList.add('weak');
            else if(pwd.length < 10) bar.classList.add('medium');
            else bar.classList.add('strong');
        }

        // ==================== MENU FUNCTIONS ====================
        function loadMenuData() {
            if(!currentUser) { 
                const saved = localStorage.getItem('alfarezz_current_user_' + deviceId);
                if(saved) currentUser = JSON.parse(saved);
                else { showPage('loginPage'); return; }
            }
            document.getElementById('menuUsername').textContent = currentUser.username;
            document.getElementById('menuSaldo').textContent = 'Rp ' + (currentUser.saldo || 0).toLocaleString('id-ID');
            document.getElementById('menuWallet').textContent = 'Rp ' + (currentUser.saldo || 0).toLocaleString('id-ID');
            document.getElementById('menuAvatar').textContent = currentUser.username.charAt(0).toUpperCase();
            if(currentUser.role === 'admin') document.getElementById('adminNavLink').style.display = 'inline-block';
            
            updateChatNotif();
        }

        function updateChatNotif() {
            if(currentUser?.role !== 'admin') {
                const userChats = chats[currentUser?.username] || [];
                const unread = userChats.filter(m => !m.read && m.sender === 'developer').length;
                if(unread > 0) {
                    document.getElementById('chatNotif').style.display = 'inline-block';
                    document.getElementById('chatNotif').textContent = unread;
                    document.getElementById('floatingChatBadge').style.display = 'inline-block';
                    document.getElementById('floatingChatBadge').textContent = unread;
                } else {
                    document.getElementById('chatNotif').style.display = 'none';
                    document.getElementById('floatingChatBadge').style.display = 'none';
                }
            }
        }

        function changeBetGlobal(amount) {
            currentBet += amount;
            if(currentBet < 1000) currentBet = 1000;
            if(currentBet > 1000000) currentBet = 1000000;
            document.getElementById('globalBet').textContent = 'Rp ' + currentBet.toLocaleString('id-ID');
            localStorage.setItem('currentBet_' + deviceId, currentBet);
        }

        function renderGameGrid() {
            const games = [
                { name: 'MAHJONG WAYS 2', icon: 'üÄÑÔ∏è', provider: 'PG Soft', rtp: '99%', features: ['WAYS', 'FREE SPIN'] },
                { name: 'GATES OF OLYMPUS', icon: '‚ö°', provider: 'Pragmatic', rtp: '98%', features: ['X5000', 'ANTI LAG'] },
                { name: 'SWEET BONANZA', icon: 'üç¨', provider: 'Pragmatic', rtp: '97%', features: ['CANDY', 'BONUS'] },
                { name: 'STARLIGHT PRINCESS', icon: 'üë∏', provider: 'Pragmatic', rtp: '98%', features: ['PRINCESS', 'MULTIPLIER'] },
                { name: 'AZTEC GEMS', icon: 'üíé', provider: 'Pragmatic', rtp: '96%', features: ['GEMS', 'JACKPOT'] },
                { name: 'WILD WEST GOLD', icon: 'ü§†', provider: 'Habanero', rtp: '97%', features: ['WILD', 'GOLD'] }
            ];
            
            let html = '';
            games.forEach((game, index) => {
                html += `
                    <div class="game-card" onclick="playGame('${game.name.toLowerCase().replace(/ /g,'')}')">
                        <div class="game-image">${game.icon}</div>
                        <div class="game-title">${game.name}</div>
                        <div class="game-provider">${game.provider}</div>
                        <div class="game-rtp">RTP ${game.rtp}</div>
                        <div class="game-features">
                            ${game.features.map(f => `<span class="feature-badge">${f}</span>`).join('')}
                        </div>
                        <button class="play-button">üé∞ MAIN</button>
                    </div>
                `;
            });
            document.getElementById('gameGrid').innerHTML = html;
        }

        function playGame(game) {
            localStorage.setItem('currentBet_' + deviceId, currentBet);
            localStorage.setItem('currentGame_' + deviceId, game);
            showPage('gamePage');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('alfarezz_current_user_' + deviceId);
            showPage('loginPage');
        }

        document.getElementById('userProfileBtn')?.addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('userDropdown').classList.toggle('show');
        });

        window.addEventListener('click', function() {
            document.getElementById('userDropdown')?.classList.remove('show');
        });

        // ==================== INFO AKUN ====================
        function loadInfoAkun() {
            if(!currentUser) return;
            document.getElementById('profileCard').innerHTML = `
                <div class="profile-header">
                    <div class="profile-avatar">${currentUser.username.charAt(0).toUpperCase()}</div>
                    <div class="profile-info">
                        <h2>${currentUser.username}</h2>
                        <p>Member sejak ${new Date(currentUser.registerDate || Date.now()).toLocaleDateString('id-ID')}</p>
                    </div>
                </div>
            `;
            document.getElementById('profileDetails').innerHTML = `
                <div class="detail-item"><div class="label">Email</div><div class="value">${currentUser.email || '-'}</div></div>
                <div class="detail-item"><div class="label">Nomor HP</div><div class="value">${currentUser.phone || '-'}</div></div>
                <div class="detail-item"><div class="label">Bank/EWallet</div><div class="value">${currentUser.bank ? currentUser.bank.toUpperCase() : '-'}</div></div>
                <div class="detail-item"><div class="label">No. Rekening</div><div class="value">${currentUser.accountNumber || '-'}</div></div>
                <div class="detail-item"><div class="label">Nama Rekening</div><div class="value">${currentUser.accountName || '-'}</div></div>
            `;
        }

        // ==================== RIWAYAT ====================
        function loadRiwayat(filter = 'all') {
            if(!currentUser) return;
            const userDeposits = deposits.filter(d => d.username === currentUser.username);
            const userWDs = wds.filter(w => w.username === currentUser.username);
            let allTransactions = [
                ...userDeposits.map(d => ({ ...d, tipe: 'deposit' })),
                ...userWDs.map(w => ({ ...w, tipe: 'wd' }))
            ].sort((a, b) => new Date(b.waktu) - new Date(a.waktu));
            
            if(filter !== 'all') allTransactions = allTransactions.filter(t => t.tipe === filter);
            
            let html = '';
            if(allTransactions.length === 0) {
                html = '<tr><td colspan="5" style="text-align: center; padding: 30px;">Belum ada transaksi</td></tr>';
            } else {
                allTransactions.forEach(t => {
                    html += `<tr><td>${new Date(t.waktu).toLocaleString('id-ID')}</td><td>${t.tipe === 'deposit' ? 'üí∞ DEPOSIT' : 'üí∏ WITHDRAW'}</td><td>Rp ${t.jumlah.toLocaleString('id-ID')}</td><td class="status-${t.status}">${t.status.toUpperCase()}</td><td>${t.tipe === 'deposit' ? t.bank : t.bank + ' - ' + t.rekening}</td></tr>`;
                });
            }
            document.getElementById('historyBody').innerHTML = html;
        }

        function filterHistory(filter) {
            document.querySelectorAll('.history-filter').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            loadRiwayat(filter);
        }

        // ==================== CHAT ====================
        function loadUserChat() {
            if(!currentUser) return;
            const chatMessages = document.getElementById('userChatMessages');
            const userChats = chats[currentUser.username] || [];
            
            if(userChats.length === 0) {
                chatMessages.innerHTML = '<div class="no-chat">Belum ada pesan. Mulai percakapan dengan Developer!</div>';
            } else {
                let html = '';
                userChats.forEach(msg => {
                    const isMe = msg.sender === 'user';
                    html += `<div class="chat-message ${isMe ? 'user' : 'developer'}"><div class="chat-avatar">${isMe ? 'üë§' : 'üë®‚Äçüíª'}</div><div class="chat-bubble"><div class="chat-name">${isMe ? currentUser.username : 'Developer'}</div><div class="chat-text">${msg.text}</div><div class="chat-time">${new Date(msg.time).toLocaleTimeString('id-ID')}</div></div></div>`;
                });
                chatMessages.innerHTML = html;
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            if(chats[currentUser.username]) {
                chats[currentUser.username].forEach(msg => { if(msg.sender === 'developer') msg.read = true; });
                localStorage.setItem('alfarezz_chats', JSON.stringify(chats));
            }
            updateChatNotif();
        }

        function sendUserMessage() {
            const input = document.getElementById('userChatInput');
            const text = input.value.trim();
            if(!text || !currentUser) return;
            if(!chats[currentUser.username]) chats[currentUser.username] = [];
            chats[currentUser.username].push({ sender: 'user', text, time: new Date().toISOString(), read: false });
            localStorage.setItem('alfarezz_chats', JSON.stringify(chats));
            input.value = '';
            loadUserChat();
        }

        // ==================== GAME FUNCTIONS (FIX TOTAL) ====================
        function initGamePage() {
            if(!currentUser) { 
                const saved = localStorage.getItem('alfarezz_current_user_' + deviceId);
                if(saved) currentUser = JSON.parse(saved);
                else { showPage('loginPage'); return; }
            }
            
            document.getElementById('gameSaldo').textContent = 'Rp ' + (currentUser.saldo || 0).toLocaleString('id-ID');
            const savedBet = localStorage.getItem('currentBet_' + deviceId);
            if(savedBet) {
                currentBet = parseInt(savedBet);
                document.getElementById('gameBet').textContent = 'Rp ' + currentBet.toLocaleString('id-ID');
                document.getElementById('gameBetValue').textContent = 'Rp ' + currentBet.toLocaleString('id-ID');
            }
            
            // Reset free spin state
            freeSpinRemaining = 0;
            isFreeSpinActive = false;
            isCascading = false;
            document.getElementById('freeSpinInfo').style.display = 'none';
            document.getElementById('gameFreeSpin').textContent = '0';
            
            generateRandomGrid();
        }

        function generateRandomGrid() {
            let html = '';
            for(let c = 0; c < 6; c++) {
                html += '<div class="reel-column" id="col'+c+'">';
                for(let r = 0; r < 4; r++) {
                    const sym = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                    html += `<div class="reel-cell" id="cell${c}_${r}">${sym}</div>`;
                }
                html += '</div>';
            }
            document.getElementById('reelsContainer').innerHTML = html;
        }

        function changeGameBet(amount) {
            currentBet += amount;
            if(currentBet < 1000) currentBet = 1000;
            if(currentBet > 1000000) currentBet = 1000000;
            document.getElementById('gameBet').textContent = 'Rp ' + currentBet.toLocaleString('id-ID');
            document.getElementById('gameBetValue').textContent = 'Rp ' + currentBet.toLocaleString('id-ID');
            localStorage.setItem('currentBet_' + deviceId, currentBet);
        }

        function gameSpin() {
            if(isCascading) return; // Lagi cascading, ga bisa spin
            
            // Cek free spin
            if(!isFreeSpinActive && currentUser.saldo < currentBet) { 
                alert('Saldo gak cukup!'); 
                return; 
            }
            
            // Kurangi saldo atau free spin
            if(!isFreeSpinActive) {
                currentUser.saldo -= currentBet;
            } else {
                freeSpinRemaining--;
                document.getElementById('freeSpinRemaining').textContent = freeSpinRemaining;
                document.getElementById('gameFreeSpin').textContent = freeSpinRemaining;
                
                if(freeSpinRemaining <= 0) {
                    isFreeSpinActive = false;
                    document.getElementById('freeSpinInfo').style.display = 'none';
                }
            }
            
            document.getElementById('gameSaldo').textContent = 'Rp ' + currentUser.saldo.toLocaleString('id-ID');
            
            // Animasi spin
            for(let c = 0; c < 6; c++) {
                const col = document.getElementById(`col${c}`);
                if(col) col.classList.add('spinning');
            }
            
            setTimeout(() => {
                // CEK SCATTER DARI ADMIN
                const gameScatter = scatterSettings[currentUser.username];
                const currentGame = localStorage.getItem('currentGame_' + deviceId);
                
                // KALAU ADA SCATTER SETTING, PAKSA MUNCUL
                if(gameScatter && gameScatter.game === currentGame && gameScatter.jumlah > 0 && !isFreeSpinActive) {
                    // Generate grid random dulu
                    for(let c = 0; c < 6; c++) {
                        for(let r = 0; r < 4; r++) {
                            const cell = document.getElementById(`cell${c}_${r}`);
                            if(cell) {
                                cell.textContent = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                                cell.classList.remove('scatter', 'wild');
                            }
                        }
                    }
                    
                    // PAKSA SCATTER di posisi pertama
                    const jumlah = gameScatter.jumlah;
                    const nominal = gameScatter.nominal;
                    
                    for(let i = 0; i < jumlah; i++) {
                        const col = i % 6;
                        const row = Math.floor(i / 6) % 4;
                        const cell = document.getElementById(`cell${col}_${row}`);
                        if(cell) {
                            cell.textContent = SCATTER;
                            cell.classList.add('scatter');
                            
                            // Ledakan
                            const explosion = document.createElement('div');
                            explosion.className = 'explosion';
                            cell.appendChild(explosion);
                            setTimeout(() => explosion.remove(), 500);
                        }
                    }
                    
                    // Hitung free spins
                    const freeSpins = jumlah === 3 ? 10 : jumlah === 4 ? 12 : 14;
                    
                    // Tampilkan pesan
                    showScatterMessage(jumlah, nominal, freeSpins);
                    
                    // Set free spin
                    freeSpinRemaining = freeSpins;
                    isFreeSpinActive = true;
                    document.getElementById('freeSpinInfo').style.display = 'flex';
                    document.getElementById('freeSpinRemaining').textContent = freeSpinRemaining;
                    document.getElementById('gameFreeSpin').textContent = freeSpinRemaining;
                    
                    // Hapus setting
                    delete scatterSettings[currentUser.username];
                    localStorage.setItem('alfarezz_scatter', JSON.stringify(scatterSettings));
                    
                    updateUserSaldo();
                } else {
                    // GENERATE RANDOM NORMAL
                    for(let c = 0; c < 6; c++) {
                        for(let r = 0; r < 4; r++) {
                            const cell = document.getElementById(`cell${c}_${r}`);
                            if(cell) {
                                cell.textContent = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                                cell.classList.remove('scatter', 'wild');
                            }
                        }
                    }
                    
                    // HITUNG SCATTER
                    let scatterCount = 0;
                    let scatterPositions = [];
                    
                    for(let c = 0; c < 6; c++) {
                        for(let r = 0; r < 4; r++) {
                            const cell = document.getElementById(`cell${c}_${r}`);
                            if(cell && cell.textContent === SCATTER) {
                                scatterCount++;
                                scatterPositions.push(cell);
                            }
                        }
                    }
                    
                    // KALAU DAPAT SCATTER NATURAL
                    if(scatterCount >= 3 && !isFreeSpinActive) {
                        const freeSpins = scatterCount === 3 ? 10 : scatterCount === 4 ? 12 : 14;
                        
                        scatterPositions.forEach(cell => {
                            const explosion = document.createElement('div');
                            explosion.className = 'explosion';
                            cell.appendChild(explosion);
                            setTimeout(() => explosion.remove(), 500);
                        });
                        
                        showScatterMessage(scatterCount, 0, freeSpins);
                        
                        freeSpinRemaining = freeSpins;
                        isFreeSpinActive = true;
                        document.getElementById('freeSpinInfo').style.display = 'flex';
                        document.getElementById('freeSpinRemaining').textContent = freeSpinRemaining;
                        document.getElementById('gameFreeSpin').textContent = freeSpinRemaining;
                    }
                }
                
                // HITUNG KEMENANGAN + CASCADING
                calculateWins();
                
                // Hentikan animasi
                for(let c = 0; c < 6; c++) {
                    const col = document.getElementById(`col${c}`);
                    if(col) col.classList.remove('spinning');
                }
                
            }, 600);
        }

        function calculateWins() {
            let totalWin = 0;
            let wildPositions = [];
            
            // Cari semua wild (buah emas yang meledak)
            for(let c = 0; c < 6; c++) {
                for(let r = 0; r < 4; r++) {
                    const cell = document.getElementById(`cell${c}_${r}`);
                    if(cell && cell.textContent === WILD) {
                        wildPositions.push({c, r, cell});
                    }
                }
            }
            
            // Hitung kemenangan dari kombinasi
            for(let r = 0; r < 4; r++) {
                const rowSymbols = [];
                for(let c = 0; c < 6; c++) {
                    const cell = document.getElementById(`cell${c}_${r}`);
                    if(cell) rowSymbols.push(cell.textContent);
                }
                
                const counts = {};
                rowSymbols.forEach(sym => {
                    if(sym !== SCATTER) counts[sym] = (counts[sym] || 0) + 1;
                });
                
                for(let sym in counts) {
                    if(counts[sym] >= 3) {
                        let win = currentBet * (counts[sym] - 2) * 2;
                        if(isFreeSpinActive) win *= 2;
                        totalWin += win;
                        
                        // Tandai posisi yang menang buat di-cascading
                        for(let c = 0; c < 6; c++) {
                            const cell = document.getElementById(`cell${c}_${r}`);
                            if(cell && cell.textContent === sym) {
                                if(!wildPositions.some(w => w.c === c && w.r === r)) {
                                    wildPositions.push({c, r, cell});
                                }
                            }
                        }
                    }
                }
            }
            
            // Wild sendiri juga ngasih kemenangan
            totalWin += wildPositions.length * currentBet * (isFreeSpinActive ? 4 : 2);
            
            if(totalWin > 0) {
                currentUser.saldo += totalWin;
                document.getElementById('winMessage').innerHTML = `<div class="win-amount">üéâ MENANG Rp ${totalWin.toLocaleString('id-ID')} üéâ</div>`;
                
                // KALAU ADA WILD, LAKUKAN CASCADING
                if(wildPositions.length > 0) {
                    // Ledakan wild
                    wildPositions.forEach(pos => {
                        const explosion = document.createElement('div');
                        explosion.className = 'explosion';
                        pos.cell.appendChild(explosion);
                    });
                    
                    // Cascading setelah ledakan
                    setTimeout(() => {
                        isCascading = true;
                        
                        // Ganti wild dengan simbol baru dari atas
                        for(let pos of wildPositions) {
                            // Geser semua simbol di kolom ke bawah
                            for(let r = pos.r; r > 0; r--) {
                                const upperCell = document.getElementById(`cell${pos.c}_${r-1}`);
                                const currentCell = document.getElementById(`cell${pos.c}_${r}`);
                                if(upperCell && currentCell) {
                                    currentCell.textContent = upperCell.textContent;
                                }
                            }
                            // Isi paling atas dengan simbol random
                            const topCell = document.getElementById(`cell${pos.c}_0`);
                            if(topCell) {
                                topCell.textContent = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                            }
                        }
                        
                        // Bersihin class
                        for(let c = 0; c < 6; c++) {
                            for(let r = 0; r < 4; r++) {
                                const cell = document.getElementById(`cell${c}_${r}`);
                                if(cell) {
                                    cell.classList.remove('scatter', 'wild');
                                    if(cell.textContent === SCATTER) cell.classList.add('scatter');
                                    if(cell.textContent === WILD) cell.classList.add('wild');
                                }
                            }
                        }
                        
                        isCascading = false;
                        
                        // Hitung ulang kemenangan (cascading lagi)
                        calculateWins();
                    }, 600);
                }
            }
            
            updateUserSaldo();
        }

        function showScatterMessage(jumlah, nominal, freeSpins) {
            const overlay = document.createElement('div');
            overlay.className = 'scatter-overlay';
            overlay.innerHTML = `
                <div class="scatter-box">
                    <h1>üéâ SELAMAT! üéâ</h1>
                    <h2>ANDA MENDAPATKAN ${jumlah} SCATTER „äôÔ∏è</h2>
                    <div class="multiplier">${freeSpins} FREE SPIN</div>
                    ${nominal > 0 ? `<p style="font-size:30px; color:white;">BONUS Rp ${nominal.toLocaleString('id-ID')}</p>` : ''}
                    <button onclick="this.closest('.scatter-overlay').remove()">MULAI</button>
                </div>
            `;
            document.body.appendChild(overlay);
            
            if(nominal > 0) {
                currentUser.saldo += nominal;
                updateUserSaldo();
                document.getElementById('gameSaldo').textContent = 'Rp ' + currentUser.saldo.toLocaleString('id-ID');
            }
        }

        function updateUserSaldo() {
            const userIndex = users.findIndex(u => u.username === currentUser.username);
            if(userIndex >= 0) {
                users[userIndex].saldo = currentUser.saldo;
                localStorage.setItem('alfarezz_users', JSON.stringify(users));
                localStorage.setItem('alfarezz_current_user_' + deviceId, JSON.stringify(currentUser));
            }
        }

        // ==================== ADMIN FUNCTIONS ====================
        function loadAdminData() {
            if(!currentUser || currentUser.username !== 'ezel') {
                const saved = localStorage.getItem('alfarezz_current_user_' + deviceId);
                if(saved) currentUser = JSON.parse(saved);
                if(!currentUser || currentUser.username !== 'ezel') {
                    alert('Lu bukan admin, kontol!');
                    showPage('loginPage');
                    return;
                }
            }
            
            users = JSON.parse(localStorage.getItem('alfarezz_users')) || [];
            deposits = JSON.parse(localStorage.getItem('alfarezz_deposits')) || [];
            wds = JSON.parse(localStorage.getItem('alfarezz_wd')) || [];
            chats = JSON.parse(localStorage.getItem('alfarezz_chats')) || {};
            scatterSettings = JSON.parse(localStorage.getItem('alfarezz_scatter')) || {};
            kemenanganSettings = JSON.parse(localStorage.getItem('alfarezz_kemenangan')) || {};
            
            updateAdminBadges();
            switchAdminTab(currentAdminTab);
        }

        function updateAdminBadges() {
            const pendingDeposits = deposits.filter(d => d.status === 'pending').length;
            const pendingWDs = wds.filter(w => w.status === 'pending').length;
            const unreadChats = Object.keys(chats).filter(u => chats[u].some(m => !m.read && m.sender === 'user')).length;
            
            document.getElementById('adminDepositBadge').style.display = pendingDeposits > 0 ? 'inline-block' : 'none';
            document.getElementById('adminDepositBadge').textContent = pendingDeposits;
            document.getElementById('adminWDBadge').style.display = pendingWDs > 0 ? 'inline-block' : 'none';
            document.getElementById('adminWDBadge').textContent = pendingWDs;
            document.getElementById('adminChatBadge').style.display = unreadChats > 0 ? 'inline-block' : 'none';
            document.getElementById('adminChatBadge').textContent = unreadChats;
        }

        function switchAdminTab(tab) {
            currentAdminTab = tab;
            document.querySelectorAll('.admin-sidebar-item').forEach(item => item.classList.remove('active'));
            if(event) event.target.classList.add('active');
            
            const content = document.getElementById('adminContent');
            
            if(tab === 'dashboard') {
                content.innerHTML = `<div class="admin-header"><h2>üìä DASHBOARD</h2><div class="badge-large">${new Date().toLocaleDateString('id-ID')}</div></div><div style="display: grid; grid-template-columns: repeat(2,1fr); gap: 20px;"><div style="background: rgba(255,215,0,0.1); border-radius: 20px; padding: 20px;"><h3 style="color: var(--primary);">Total Users</h3><p style="font-size: 48px;">${users.length}</p></div><div style="background: rgba(255,215,0,0.1); border-radius: 20px; padding: 20px;"><h3 style="color: var(--primary);">Online Users</h3><p style="font-size: 48px;">${users.filter(u => (new Date() - new Date(u.lastSeen||0)) < 300000).length}</p></div></div>`;
            }
            else if(tab === 'deposit') {
                let html = `<div class="admin-header"><h2>üí∞ DEPOSIT</h2><div class="badge-large">${deposits.filter(d => d.status === 'pending').length} Pending</div></div><table class="admin-table"><thead><tr><th>User</th><th>Jumlah</th><th>Bank</th><th>Waktu</th><th>Action</th></tr></thead><tbody>`;
                deposits.filter(d => d.status === 'pending').forEach(d => {
                    html += `<tr><td>${d.username}</td><td>Rp ${d.jumlah.toLocaleString('id-ID')}</td><td>${d.bank.toUpperCase()}</td><td>${new Date(d.waktu).toLocaleString()}</td><td><button class="admin-action-btn btn-accept" onclick="approveDeposit('${d.id}')">‚úì ACCEPT</button><button class="admin-action-btn btn-reject" onclick="rejectDeposit('${d.id}')">‚úó REJECT</button></td></tr>`;
                });
                if(deposits.filter(d => d.status === 'pending').length === 0) html += '<tr><td colspan="5" style="text-align: center;">Tidak ada deposit pending</td></tr>';
                html += '</tbody></table>';
                content.innerHTML = html;
            }
            else if(tab === 'withdraw') {
                let html = `<div class="admin-header"><h2>üí∏ WITHDRAW</h2><div class="badge-large">${wds.filter(w => w.status === 'pending').length} Pending</div></div><table class="admin-table"><thead><tr><th>User</th><th>Jumlah</th><th>Bank</th><th>Rekening</th><th>Action</th></tr></thead><tbody>`;
                wds.filter(w => w.status === 'pending').forEach(w => {
                    html += `<tr><td>${w.username}</td><td>Rp ${w.jumlah.toLocaleString('id-ID')}</td><td>${w.bank.toUpperCase()}</td><td>${w.rekening}</td><td><button class="admin-action-btn btn-accept" onclick="approveWD('${w.id}')">‚úì ACCEPT</button><button class="admin-action-btn btn-reject" onclick="rejectWD('${w.id}')">‚úó REJECT</button></td></tr>`;
                });
                if(wds.filter(w => w.status === 'pending').length === 0) html += '<tr><td colspan="5" style="text-align: center;">Tidak ada WD pending</td></tr>';
                html += '</tbody></table>';
                content.innerHTML = html;
            }
            else if(tab === 'users') {
                let html = `<div class="admin-header"><h2>üë• USERS</h2><input type="text" id="adminUserSearch" placeholder="üîç Cari..." style="padding: 8px 15px; border-radius: 30px; border:2px solid var(--primary); background:#2a2f3f; color:white;"></div><div class="chat-user-list" id="adminUserList">`;
                users.forEach(u => {
                    html += `<div class="chat-user-item" onclick="openUserModal('${u.username}', 'saldo')"><div class="chat-user-avatar">${u.username.charAt(0).toUpperCase()}</div><div class="chat-user-info"><div class="chat-user-name">${u.username}</div><div class="chat-user-preview">üí∞ Rp ${(u.saldo||0).toLocaleString('id-ID')}</div></div></div>`;
                });
                html += '</div>';
                content.innerHTML = html;
                document.getElementById('adminUserSearch').addEventListener('input', function() {
                    const search = this.value.toLowerCase();
                    document.querySelectorAll('#adminUserList .chat-user-item').forEach(item => {
                        item.style.display = item.querySelector('.chat-user-name').textContent.toLowerCase().includes(search) ? 'flex' : 'none';
                    });
                });
            }
            else if(tab === 'chat') {
                let html = `<div class="admin-header"><h2>üí¨ CHAT</h2><div class="badge-large">${Object.keys(chats).filter(u => chats[u].some(m => !m.read && m.sender === 'user')).length} Unread</div></div><div class="chat-user-list">`;
                Object.keys(chats).sort((a,b) => new Date(chats[b][chats[b].length-1]?.time) - new Date(chats[a][chats[a].length-1]?.time)).forEach(u => {
                    const unread = chats[u].filter(m => !m.read && m.sender === 'user').length;
                    html += `<div class="chat-user-item ${unread>0?'unread':''}" onclick="openAdminChat('${u}')"><div class="chat-user-avatar">${u.charAt(0).toUpperCase()}</div><div class="chat-user-info"><div class="chat-user-name">${u}</div><div class="chat-user-preview">${chats[u][chats[u].length-1]?.text.substring(0,30)}...</div></div>${unread>0?`<span class="chat-user-badge">${unread}</span>`:''}</div>`;
                });
                html += '</div>';
                content.innerHTML = html;
            }
            else if(tab === 'settings') {
                content.innerHTML = `<div class="admin-header"><h2>‚öôÔ∏è SETTINGS</h2></div><div style="background: rgba(255,215,0,0.1); border-radius: 20px; padding: 20px;"><h3 style="color: var(--primary);">Maintenance</h3><button class="btn-gold" onclick="alert('Maintenance')">Aktifkan</button></div>`;
            }
        }

        function openAdminChat(username) {
            currentChatUser = username;
            const content = document.getElementById('adminContent');
            let html = `<div class="admin-header"><h2>üí¨ CHAT dengan ${username}</h2><button class="btn-gold" onclick="switchAdminTab('chat')">‚óÄ KEMBALI</button></div><div class="admin-chat-container"><div class="admin-chat-messages" id="adminChatMessages">`;
            chats[username].forEach(msg => {
                html += `<div class="chat-message ${msg.sender === 'developer' ? 'developer' : 'user'}"><div class="chat-avatar">${msg.sender === 'developer' ? 'üë®‚Äçüíª' : 'üë§'}</div><div class="chat-bubble"><div class="chat-name">${msg.sender === 'developer' ? 'Developer' : username}</div><div class="chat-text">${msg.text}</div><div class="chat-time">${new Date(msg.time).toLocaleTimeString('id-ID')}</div></div></div>`;
            });
            html += `</div><div class="admin-chat-input"><input type="text" class="chat-input" id="adminChatInput" placeholder="Ketik..." onkeypress="if(event.key==='Enter') sendAdminMessage()"><button class="chat-send" onclick="sendAdminMessage()">‚û§</button></div></div>`;
            content.innerHTML = html;
            
            chats[username].forEach(msg => { if(msg.sender === 'user') msg.read = true; });
            localStorage.setItem('alfarezz_chats', JSON.stringify(chats));
            document.getElementById('adminChatMessages').scrollTop = document.getElementById('adminChatMessages').scrollHeight;
        }

        function sendAdminMessage() {
            const input = document.getElementById('adminChatInput');
            const text = input.value.trim();
            if(!text || !currentChatUser) return;
            if(!chats[currentChatUser]) chats[currentChatUser] = [];
            chats[currentChatUser].push({ sender: 'developer', text, time: new Date().toISOString(), read: false });
            localStorage.setItem('alfarezz_chats', JSON.stringify(chats));
            input.value = '';
            openAdminChat(currentChatUser);
        }

        function approveDeposit(id) {
            const depo = deposits.find(d => d.id === id);
            if(depo) {
                depo.status = 'approved';
                const user = users.find(u => u.username === depo.username);
                if(user) user.saldo = (user.saldo || 0) + depo.jumlah;
                localStorage.setItem('alfarezz_deposits', JSON.stringify(deposits));
                localStorage.setItem('alfarezz_users', JSON.stringify(users));
                updateAdminBadges();
                switchAdminTab('deposit');
            }
        }

        function rejectDeposit(id) {
            const depo = deposits.find(d => d.id === id);
            if(depo) {
                depo.status = 'rejected';
                localStorage.setItem('alfarezz_deposits', JSON.stringify(deposits));
                updateAdminBadges();
                switchAdminTab('deposit');
            }
        }

        function approveWD(id) {
            const wd = wds.find(w => w.id === id);
            if(wd) {
                wd.status = 'approved';
                localStorage.setItem('alfarezz_wd', JSON.stringify(wds));
                updateAdminBadges();
                switchAdminTab('withdraw');
            }
        }

        function rejectWD(id) {
            const wd = wds.find(w => w.id === id);
            if(wd) {
                wd.status = 'rejected';
                const user = users.find(u => u.username === wd.username);
                if(user) user.saldo = (user.saldo || 0) + wd.jumlah;
                localStorage.setItem('alfarezz_wd', JSON.stringify(wds));
                localStorage.setItem('alfarezz_users', JSON.stringify(users));
                updateAdminBadges();
                switchAdminTab('withdraw');
            }
        }

        // ==================== USER MODAL FUNCTIONS ====================
        let currentModalUser = '';
        
        function openUserModal(username, tab) {
            currentModalUser = username;
            document.getElementById('modalUsername').textContent = '@' + username;
            const user = users.find(u => u.username === username);
            if(user) document.getElementById('modalCurrentSaldo').textContent = 'Rp ' + (user.saldo || 0).toLocaleString('id-ID');
            switchTab(tab);
            document.getElementById('userModal').style.display = 'block';
        }

        function closeUserModal() {
            document.getElementById('userModal').style.display = 'none';
        }

        function switchTab(tab) {
            document.getElementById('tabSaldoContent').style.display = tab === 'saldo' ? 'block' : 'none';
            document.getElementById('tabScatterContent').style.display = tab === 'scatter' ? 'block' : 'none';
            document.getElementById('tabKemenanganContent').style.display = tab === 'kemenangan' ? 'block' : 'none';
            
            document.getElementById('tabSaldoBtn').style.background = tab === 'saldo' ? 'var(--primary)' : '#2a2f3f';
            document.getElementById('tabSaldoBtn').style.color = tab === 'saldo' ? 'var(--dark)' : 'white';
            document.getElementById('tabScatterBtn').style.background = tab === 'scatter' ? 'var(--primary)' : '#2a2f3f';
            document.getElementById('tabScatterBtn').style.color = tab === 'scatter' ? 'var(--dark)' : 'white';
            document.getElementById('tabKemenanganBtn').style.background = tab === 'kemenangan' ? 'var(--primary)' : '#2a2f3f';
            document.getElementById('tabKemenanganBtn').style.color = tab === 'kemenangan' ? 'var(--dark)' : 'white';
        }

        function addSaldo() {
            const amount = parseInt(document.getElementById('modalSaldoAmount').value);
            if(!amount || amount <= 0) { alert('Masukkan jumlah!'); return; }
            const user = users.find(u => u.username === currentModalUser);
            if(user) {
                user.saldo = (user.saldo || 0) + amount;
                localStorage.setItem('alfarezz_users', JSON.stringify(users));
                alert(`Saldo ${currentModalUser} ditambah Rp ${amount.toLocaleString('id-ID')}`);
                closeUserModal();
                switchAdminTab('users');
            }
        }

        function setSaldo() {
            const amount = parseInt(document.getElementById('modalSaldoAmount').value);
            if(amount < 0) { alert('Masukkan jumlah!'); return; }
            const user = users.find(u => u.username === currentModalUser);
            if(user) {
                user.saldo = amount;
                localStorage.setItem('alfarezz_users', JSON.stringify(users));
                alert(`Saldo ${currentModalUser} di-set ke Rp ${amount.toLocaleString('id-ID')}`);
                closeUserModal();
                switchAdminTab('users');
            }
        }

        function applyScatter() {
            const jumlah = parseInt(document.getElementById('scatterJumlah').value);
            const nominal = parseInt(document.getElementById('scatterNominal').value);
            const game = document.getElementById('scatterGame').value;
            
            if(jumlah === 0) {
                delete scatterSettings[currentModalUser];
                alert(`‚úÖ Scatter dihapus untuk ${currentModalUser}`);
            } else {
                const freeSpins = jumlah === 3 ? 10 : jumlah === 4 ? 12 : 14;
                scatterSettings[currentModalUser] = { jumlah, nominal, game, waktu: new Date().toISOString() };
                alert(`‚úÖ Scatter ${jumlah} (${freeSpins} free spin) dengan bonus Rp ${nominal.toLocaleString('id-ID')} untuk ${currentModalUser} (Game: ${game})`);
            }
            localStorage.setItem('alfarezz_scatter', JSON.stringify(scatterSettings));
            closeUserModal();
        }

        function applyKemenangan() {
            const game = document.getElementById('kemenanganGame').value;
            const nominal = parseInt(document.getElementById('kemenanganNominal').value);
            const tipe = document.getElementById('kemenanganTipe').value;
            kemenanganSettings[currentModalUser] = { game, nominal, tipe, waktu: new Date().toISOString() };
            localStorage.setItem('alfarezz_kemenangan', JSON.stringify(kemenanganSettings));
            alert(`‚úÖ Setting kemenangan untuk ${currentModalUser}: ${tipe.toUpperCase()} ${nominal ? 'Rp '+nominal.toLocaleString('id-ID') : ''} (Game: ${game})`);
            closeUserModal();
        }

        // ==================== MODAL FUNCTIONS ====================
        function showModal(type) {
            document.getElementById('modal' + (type === 'depo' ? 'Depo' : 'Wd')).style.display = 'block';
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
        }

        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => alert('‚úÖ Nomor berhasil di-copy!'));
        }

        function processDeposit() {
            const jumlah = parseInt(document.getElementById('depoJumlah').value);
            if(jumlah < 50000) { alert('Minimal deposit 50.000!'); return; }
            deposits.push({
                id: Date.now().toString(),
                username: currentUser.username,
                jumlah,
                bank: document.getElementById('depoBank').value,
                waktu: new Date().toISOString(),
                status: 'pending'
            });
            localStorage.setItem('alfarezz_deposits', JSON.stringify(deposits));
            alert('‚úÖ Deposit diproses! Menunggu konfirmasi admin.');
            closeModal();
        }

        function processWD() {
            const jumlah = parseInt(document.getElementById('wdJumlah').value);
            if(jumlah < 50000) { alert('Minimal WD 50.000!'); return; }
            if(jumlah > currentUser.saldo) { alert('Saldo gak cukup!'); return; }
            
            currentUser.saldo -= jumlah;
            wds.push({
                id: Date.now().toString(),
                username: currentUser.username,
                jumlah,
                bank: document.getElementById('wdBank').value,
                rekening: document.getElementById('wdRekening').value,
                waktu: new Date().toISOString(),
                status: 'pending'
            });
            localStorage.setItem('alfarezz_wd', JSON.stringify(wds));
            updateUserSaldo();
            alert('‚úÖ WD diproses! Menunggu konfirmasi admin.');
            closeModal();
            loadMenuData();
        }

        // ==================== INIT ====================
        window.onload = function() {
            const saved = localStorage.getItem('alfarezz_current_user_' + deviceId);
            if(saved) {
                currentUser = JSON.parse(saved);
                if(currentUser.username === 'ezel') {
                    showPage('adminPage');
                    document.getElementById('adminNavLink').style.display = 'inline-block';
                } else showPage('menuPage');
            }
            
            window.onclick = function(e) {
                if(e.target.classList.contains('modal')) e.target.style.display = 'none';
                if(!e.target.closest('.user-profile')) document.getElementById('userDropdown')?.classList.remove('show');
            };
            
            setInterval(() => {
                if(currentUser?.role === 'admin') {
                    deposits = JSON.parse(localStorage.getItem('alfarezz_deposits')) || [];
                    wds = JSON.parse(localStorage.getItem('alfarezz_wd')) || [];
                    chats = JSON.parse(localStorage.getItem('alfarezz_chats')) || {};
                    updateAdminBadges();
                } else {
                    chats = JSON.parse(localStorage.getItem('alfarezz_chats')) || {};
                    updateChatNotif();
                }
            }, 2000);
        };
    </script>
</body>
</html>